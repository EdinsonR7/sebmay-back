<%- layout('layouts/main') %>

<div class="section-header">
  <h2>Gesti√≥n de Productos</h2>
  <a href="/productos/new" class="btn">‚ûï Nuevo Producto</a>
</div>

<div class="table-container">
  <div class="table-wrapper">
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Nombre</th>
          <th>Categor√≠a</th>
          <th>Tipo</th>
          <th>Precio</th>
          <th>Stock</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <% if (productos.length === 0) { %>
          <tr>
            <td colspan="7" class="no-data">
              No hay productos registrados. ¬°Crea uno nuevo!
            </td>
          </tr>
        <% } else { %>
          <% productos.forEach(p => { %>
            <tr>
              <td><%= p.id %></td>
              <td>
                <a href="/productos/<%= p.id %>" class="link-nombre">
                  <%= p.nombre %>
                </a>
              </td>
              <td><%= p.categoria %></td>
              <td><%= p.tipo %></td>
              <td>$<%= Number(p.precio).toLocaleString('es-CO') %></td>
              <td>
                <span class="badge <%= p.stock <= 5 ? 'badge-warning' : p.stock === 0 ? 'badge-danger' : 'badge-success' %>">
                  <%= p.stock %>
                </span>
              </td>
              <td>
                <div class="action-buttons">
                  <a href="/productos/<%= p.id %>/edit" class="btn-edit">‚úèÔ∏è Editar</a>
                  <form action="/productos/<%= p.id %>?_method=DELETE" method="POST" style="display:inline; width: 100%;">
                    <button type="submit" class="btn-delete" onclick="return confirm('¬øEst√°s seguro de eliminar <%= p.nombre %>?')">
                      üóëÔ∏è Eliminar
                    </button>
                  </form>
                </div>
              </td>
            </tr>
          <% }) %>
        <% } %>
      </tbody>
    </table>
  </div>
</div>